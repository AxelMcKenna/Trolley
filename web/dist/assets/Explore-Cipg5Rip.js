import{a as Ye,b as ko,j as r,L as $t,c as un,r as u,d as wt,e as Vt}from"./index-Coi2vgDx.js";import{c as fe,S as Wt,I as zt,B as X,b as To,M as bt,d as fn,u as G,e as Oo,f as K,C as pn,g as Mo,X as Ut,h as _o,i as Io,a as Kt,j as Lo,k as Do}from"./productParams-DSKcz1WG.js";import{S as oe,c as W,d as St,u as mn,e as hn,f as ie,g as Fo,h as ct,i as Ct,j as Bo,k as xn,l as z,m as Ho,n as $o,o as Vo,R as Wo,F as zo,D as Uo,p as qt,q as Ko,a as dt,r as qo,s as Go,t as rt,v as st,w as Gt,L as Yo,P as Xo}from"./index-DrjjgTOJ.js";import{A as Yt,L as Zo,C as Qo}from"./loader-2-P5zHDR_0.js";import{N as ut}from"./navigation-Go8l6rJM.js";const Jo=fe("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),er=fe("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),tr=fe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),nr=fe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),or=fe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),rr=fe("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),sr=fe("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),ir=fe("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),ar=fe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),lr=({query:e,setQuery:t,onSearch:n,variant:o="compact"})=>{const{radiusKm:s,isLocationSet:i,openLocationModal:a}=Ye(),{itemCount:l}=ko();return o==="landing"?r.jsx("header",{className:"bg-primary border-b border-primary",children:r.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-3xl md:text-4xl font-semibold text-white mb-2 tracking-tight",children:"GROCIFY"}),r.jsx("p",{className:"text-sm text-white/80 mb-6",children:"Compare grocery prices across NZ"}),r.jsxs("div",{className:"max-w-xl mx-auto relative",children:[r.jsx(Wt,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),r.jsx(zt,{placeholder:"Search for groceries...",value:e,onChange:c=>t(c.target.value),onKeyDown:c=>c.key==="Enter"&&n(),className:"pl-12 h-12 bg-white text-base"})]})]})})}):r.jsx("header",{className:"bg-primary border-b border-primary",children:r.jsx("div",{className:"px-4 py-3",children:r.jsxs("div",{className:"flex items-center justify-between gap-6",children:[r.jsx($t,{to:"/",className:"flex-shrink-0",children:r.jsx("span",{className:"text-lg font-semibold text-white",children:"GROCIFY"})}),r.jsx("div",{className:"flex-1 flex justify-center",children:r.jsxs("div",{className:"relative w-full max-w-md",children:[r.jsx(Wt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(zt,{placeholder:"Search products...",value:e,onChange:c=>t(c.target.value),onKeyDown:c=>c.key==="Enter"&&n(),className:"pl-10 h-9 bg-white text-sm"})]})}),r.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[r.jsx($t,{to:"/trolley",children:r.jsxs(X,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/10 relative",children:[r.jsx(To,{className:"h-4 w-4"}),l>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-white text-primary text-[10px] font-bold rounded-full h-4 min-w-[16px] flex items-center justify-center px-0.5",children:l})]})}),r.jsxs(X,{variant:"ghost",size:"sm",onClick:a,className:"text-white hover:bg-white/10 gap-2",children:[r.jsx(bt,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline",children:i?`${s} km`:"Location"})]})]})]})})})},jt=()=>{const[e,t]=un(),n=u.useRef(new URLSearchParams(e));u.useEffect(()=>{n.current=new URLSearchParams(e)},[e]);const o=u.useMemo(()=>{const c=e.get("q")||void 0,d=e.get("category")||void 0,p=e.get("chain"),f=p?p.split(","):void 0,g=e.get("promo_only")==="true"?!0:void 0,h=e.get("price_min")?parseFloat(e.get("price_min")):void 0,y=e.get("price_max")?parseFloat(e.get("price_max")):void 0,v=e.get("sort")||(g?oe.DISCOUNT:oe.CHEAPEST),w=e.get("store_ids"),x=w?w.split(","):void 0;return{query:c,category:d,chains:f,promo_only:g,price_min:h,price_max:y,sort:v,store_ids:x}},[e]),s=u.useCallback(c=>{const d=new URLSearchParams(n.current);Object.keys(c).length>0&&d.delete("page"),Object.entries(c).forEach(([p,f])=>{f==null||f===""?d.delete(p):p==="chains"&&Array.isArray(f)?f.length===0?d.delete("chain"):d.set("chain",f.join(",")):p==="store_ids"&&Array.isArray(f)?f.length===0?d.delete("store_ids"):d.set("store_ids",f.join(",")):p==="promo_only"?f?d.set("promo_only","true"):d.delete("promo_only"):d.set(p,String(f))}),n.current=new URLSearchParams(d),t(d)},[t]),i=u.useCallback(()=>{n.current=new URLSearchParams,t({})},[t]),a=u.useMemo(()=>{var c;return!!(o.query||o.category||(c=o.chains)!=null&&c.length||o.promo_only||o.price_min||o.price_max||o.sort&&o.sort!==oe.CHEAPEST)},[o]),l=u.useMemo(()=>{var d;let c=0;return o.category&&c++,(d=o.chains)!=null&&d.length&&(c+=o.chains.length),o.promo_only&&c++,(o.price_min||o.price_max)&&c++,o.sort&&o.sort!==oe.CHEAPEST&&c++,c},[o]);return{filters:o,updateFilters:s,clearFilters:i,hasActiveFilters:a,activeFilterCount:l}},cr=({onOpenFilters:e})=>{const{activeFilterCount:t}=jt();return r.jsx("div",{className:"bg-white border-b border-subtle lg:hidden",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-5",children:r.jsxs(X,{variant:"outline",onClick:e,className:"flex items-center gap-2 border-subtle py-4 px-4",children:[r.jsx(ir,{className:"h-4 w-4"}),"Filters",t>0&&r.jsx(fn,{className:"bg-primary text-white ml-1",children:t})]})})})},dr=["top","right","bottom","left"],he=Math.min,Z=Math.max,We=Math.round,He=Math.floor,se=e=>({x:e,y:e}),ur={left:"right",right:"left",bottom:"top",top:"bottom"},fr={start:"end",end:"start"};function ft(e,t,n){return Z(e,he(t,n))}function de(e,t){return typeof e=="function"?e(t):e}function ue(e){return e.split("-")[0]}function Pe(e){return e.split("-")[1]}function Nt(e){return e==="x"?"y":"x"}function Pt(e){return e==="y"?"height":"width"}const pr=new Set(["top","bottom"]);function re(e){return pr.has(ue(e))?"y":"x"}function Rt(e){return Nt(re(e))}function mr(e,t,n){n===void 0&&(n=!1);const o=Pe(e),s=Rt(e),i=Pt(s);let a=s==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=ze(a)),[a,ze(a)]}function hr(e){const t=ze(e);return[pt(e),t,pt(t)]}function pt(e){return e.replace(/start|end/g,t=>fr[t])}const Xt=["left","right"],Zt=["right","left"],xr=["top","bottom"],gr=["bottom","top"];function yr(e,t,n){switch(e){case"top":case"bottom":return n?t?Zt:Xt:t?Xt:Zt;case"left":case"right":return t?xr:gr;default:return[]}}function vr(e,t,n,o){const s=Pe(e);let i=yr(ue(e),n==="start",o);return s&&(i=i.map(a=>a+"-"+s),t&&(i=i.concat(i.map(pt)))),i}function ze(e){return e.replace(/left|right|bottom|top/g,t=>ur[t])}function wr(e){return{top:0,right:0,bottom:0,left:0,...e}}function gn(e){return typeof e!="number"?wr(e):{top:e,right:e,bottom:e,left:e}}function Ue(e){const{x:t,y:n,width:o,height:s}=e;return{width:o,height:s,top:n,left:t,right:t+o,bottom:n+s,x:t,y:n}}function Qt(e,t,n){let{reference:o,floating:s}=e;const i=re(t),a=Rt(t),l=Pt(a),c=ue(t),d=i==="y",p=o.x+o.width/2-s.width/2,f=o.y+o.height/2-s.height/2,g=o[l]/2-s[l]/2;let h;switch(c){case"top":h={x:p,y:o.y-s.height};break;case"bottom":h={x:p,y:o.y+o.height};break;case"right":h={x:o.x+o.width,y:f};break;case"left":h={x:o.x-s.width,y:f};break;default:h={x:o.x,y:o.y}}switch(Pe(t)){case"start":h[a]-=g*(n&&d?-1:1);break;case"end":h[a]+=g*(n&&d?-1:1);break}return h}async function br(e,t){var n;t===void 0&&(t={});const{x:o,y:s,platform:i,rects:a,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:p="viewport",elementContext:f="floating",altBoundary:g=!1,padding:h=0}=de(t,e),y=gn(h),v=l[g?f==="floating"?"reference":"floating":f],w=Ue(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(v)))==null||n?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:p,strategy:c})),x=f==="floating"?{x:o,y:s,width:a.floating.width,height:a.floating.height}:a.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),S=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},C=Ue(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:b,strategy:c}):x);return{top:(w.top-C.top+y.top)/S.y,bottom:(C.bottom-w.bottom+y.bottom)/S.y,left:(w.left-C.left+y.left)/S.x,right:(C.right-w.right+y.right)/S.x}}const Sr=async(e,t,n)=>{const{placement:o="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let d=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:p,y:f}=Qt(d,o,c),g=o,h={},y=0;for(let v=0;v<l.length;v++){var m;const{name:w,fn:x}=l[v],{x:b,y:S,data:C,reset:j}=await x({x:p,y:f,initialPlacement:o,placement:g,strategy:s,middlewareData:h,rects:d,platform:{...a,detectOverflow:(m=a.detectOverflow)!=null?m:br},elements:{reference:e,floating:t}});p=b??p,f=S??f,h={...h,[w]:{...h[w],...C}},j&&y<=50&&(y++,typeof j=="object"&&(j.placement&&(g=j.placement),j.rects&&(d=j.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):j.rects),{x:p,y:f}=Qt(d,g,c)),v=-1)}return{x:p,y:f,placement:g,strategy:s,middlewareData:h}},Cr=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:o,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=t,{element:d,padding:p=0}=de(e,t)||{};if(d==null)return{};const f=gn(p),g={x:n,y:o},h=Rt(s),y=Pt(h),m=await a.getDimensions(d),v=h==="y",w=v?"top":"left",x=v?"bottom":"right",b=v?"clientHeight":"clientWidth",S=i.reference[y]+i.reference[h]-g[h]-i.floating[y],C=g[h]-i.reference[h],j=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let R=j?j[b]:0;(!R||!await(a.isElement==null?void 0:a.isElement(j)))&&(R=l.floating[b]||i.floating[y]);const N=S/2-C/2,_=R/2-m[y]/2-1,M=he(f[w],_),F=he(f[x],_),B=M,P=R-m[y]-F,E=R/2-m[y]/2+N,I=ft(B,E,P),T=!c.arrow&&Pe(s)!=null&&E!==I&&i.reference[y]/2-(E<B?M:F)-m[y]/2<0,O=T?E<B?E-B:E-P:0;return{[h]:g[h]+O,data:{[h]:I,centerOffset:E-I-O,...T&&{alignmentOffset:O}},reset:T}}}),jr=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,o;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:p=!0,crossAxis:f=!0,fallbackPlacements:g,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:m=!0,...v}=de(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const w=ue(s),x=re(l),b=ue(l)===l,S=await(c.isRTL==null?void 0:c.isRTL(d.floating)),C=g||(b||!m?[ze(l)]:hr(l)),j=y!=="none";!g&&j&&C.push(...vr(l,m,y,S));const R=[l,...C],N=await c.detectOverflow(t,v),_=[];let M=((o=i.flip)==null?void 0:o.overflows)||[];if(p&&_.push(N[w]),f){const E=mr(s,a,S);_.push(N[E[0]],N[E[1]])}if(M=[...M,{placement:s,overflows:_}],!_.every(E=>E<=0)){var F,B;const E=(((F=i.flip)==null?void 0:F.index)||0)+1,I=R[E];if(I&&(!(f==="alignment"?x!==re(I):!1)||M.every(A=>re(A.placement)===x?A.overflows[0]>0:!0)))return{data:{index:E,overflows:M},reset:{placement:I}};let T=(B=M.filter(O=>O.overflows[0]<=0).sort((O,A)=>O.overflows[1]-A.overflows[1])[0])==null?void 0:B.placement;if(!T)switch(h){case"bestFit":{var P;const O=(P=M.filter(A=>{if(j){const $=re(A.placement);return $===x||$==="y"}return!0}).map(A=>[A.placement,A.overflows.filter($=>$>0).reduce(($,q)=>$+q,0)]).sort((A,$)=>A[1]-$[1])[0])==null?void 0:P[0];O&&(T=O);break}case"initialPlacement":T=l;break}if(s!==T)return{reset:{placement:T}}}return{}}}};function Jt(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function en(e){return dr.some(t=>e[t]>=0)}const Nr=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n,platform:o}=t,{strategy:s="referenceHidden",...i}=de(e,t);switch(s){case"referenceHidden":{const a=await o.detectOverflow(t,{...i,elementContext:"reference"}),l=Jt(a,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:en(l)}}}case"escaped":{const a=await o.detectOverflow(t,{...i,altBoundary:!0}),l=Jt(a,n.floating);return{data:{escapedOffsets:l,escaped:en(l)}}}default:return{}}}}},yn=new Set(["left","top"]);async function Pr(e,t){const{placement:n,platform:o,elements:s}=e,i=await(o.isRTL==null?void 0:o.isRTL(s.floating)),a=ue(n),l=Pe(n),c=re(n)==="y",d=yn.has(a)?-1:1,p=i&&c?-1:1,f=de(t,e);let{mainAxis:g,crossAxis:h,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof y=="number"&&(h=l==="end"?y*-1:y),c?{x:h*p,y:g*d}:{x:g*d,y:h*p}}const Rr=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,o;const{x:s,y:i,placement:a,middlewareData:l}=t,c=await Pr(t,e);return a===((n=l.offset)==null?void 0:n.placement)&&(o=l.arrow)!=null&&o.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},Er=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:o,placement:s,platform:i}=t,{mainAxis:a=!0,crossAxis:l=!1,limiter:c={fn:w=>{let{x,y:b}=w;return{x,y:b}}},...d}=de(e,t),p={x:n,y:o},f=await i.detectOverflow(t,d),g=re(ue(s)),h=Nt(g);let y=p[h],m=p[g];if(a){const w=h==="y"?"top":"left",x=h==="y"?"bottom":"right",b=y+f[w],S=y-f[x];y=ft(b,y,S)}if(l){const w=g==="y"?"top":"left",x=g==="y"?"bottom":"right",b=m+f[w],S=m-f[x];m=ft(b,m,S)}const v=c.fn({...t,[h]:y,[g]:m});return{...v,data:{x:v.x-n,y:v.y-o,enabled:{[h]:a,[g]:l}}}}}},Ar=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:o,placement:s,rects:i,middlewareData:a}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=de(e,t),p={x:n,y:o},f=re(s),g=Nt(f);let h=p[g],y=p[f];const m=de(l,t),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const b=g==="y"?"height":"width",S=i.reference[g]-i.floating[b]+v.mainAxis,C=i.reference[g]+i.reference[b]-v.mainAxis;h<S?h=S:h>C&&(h=C)}if(d){var w,x;const b=g==="y"?"width":"height",S=yn.has(ue(s)),C=i.reference[f]-i.floating[b]+(S&&((w=a.offset)==null?void 0:w[f])||0)+(S?0:v.crossAxis),j=i.reference[f]+i.reference[b]+(S?0:((x=a.offset)==null?void 0:x[f])||0)-(S?v.crossAxis:0);y<C?y=C:y>j&&(y=j)}return{[g]:h,[f]:y}}}},kr=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,o;const{placement:s,rects:i,platform:a,elements:l}=t,{apply:c=()=>{},...d}=de(e,t),p=await a.detectOverflow(t,d),f=ue(s),g=Pe(s),h=re(s)==="y",{width:y,height:m}=i.floating;let v,w;f==="top"||f==="bottom"?(v=f,w=g===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(w=f,v=g==="end"?"top":"bottom");const x=m-p.top-p.bottom,b=y-p.left-p.right,S=he(m-p[v],x),C=he(y-p[w],b),j=!t.middlewareData.shift;let R=S,N=C;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(N=b),(o=t.middlewareData.shift)!=null&&o.enabled.y&&(R=x),j&&!g){const M=Z(p.left,0),F=Z(p.right,0),B=Z(p.top,0),P=Z(p.bottom,0);h?N=y-2*(M!==0||F!==0?M+F:Z(p.left,p.right)):R=m-2*(B!==0||P!==0?B+P:Z(p.top,p.bottom))}await c({...t,availableWidth:N,availableHeight:R});const _=await a.getDimensions(l.floating);return y!==_.width||m!==_.height?{reset:{rects:!0}}:{}}}};function Xe(){return typeof window<"u"}function Re(e){return vn(e)?(e.nodeName||"").toLowerCase():"#document"}function Q(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function le(e){var t;return(t=(vn(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function vn(e){return Xe()?e instanceof Node||e instanceof Q(e).Node:!1}function ee(e){return Xe()?e instanceof Element||e instanceof Q(e).Element:!1}function ae(e){return Xe()?e instanceof HTMLElement||e instanceof Q(e).HTMLElement:!1}function tn(e){return!Xe()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Q(e).ShadowRoot}const Tr=new Set(["inline","contents"]);function Fe(e){const{overflow:t,overflowX:n,overflowY:o,display:s}=te(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!Tr.has(s)}const Or=new Set(["table","td","th"]);function Mr(e){return Or.has(Re(e))}const _r=[":popover-open",":modal"];function Ze(e){return _r.some(t=>{try{return e.matches(t)}catch{return!1}})}const Ir=["transform","translate","scale","rotate","perspective"],Lr=["transform","translate","scale","rotate","perspective","filter"],Dr=["paint","layout","strict","content"];function Et(e){const t=At(),n=ee(e)?te(e):e;return Ir.some(o=>n[o]?n[o]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||Lr.some(o=>(n.willChange||"").includes(o))||Dr.some(o=>(n.contain||"").includes(o))}function Fr(e){let t=xe(e);for(;ae(t)&&!Ne(t);){if(Et(t))return t;if(Ze(t))return null;t=xe(t)}return null}function At(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Br=new Set(["html","body","#document"]);function Ne(e){return Br.has(Re(e))}function te(e){return Q(e).getComputedStyle(e)}function Qe(e){return ee(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function xe(e){if(Re(e)==="html")return e;const t=e.assignedSlot||e.parentNode||tn(e)&&e.host||le(e);return tn(t)?t.host:t}function wn(e){const t=xe(e);return Ne(t)?e.ownerDocument?e.ownerDocument.body:e.body:ae(t)&&Fe(t)?t:wn(t)}function De(e,t,n){var o;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=wn(e),i=s===((o=e.ownerDocument)==null?void 0:o.body),a=Q(s);if(i){const l=mt(a);return t.concat(a,a.visualViewport||[],Fe(s)?s:[],l&&n?De(l):[])}return t.concat(s,De(s,[],n))}function mt(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function bn(e){const t=te(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const s=ae(e),i=s?e.offsetWidth:n,a=s?e.offsetHeight:o,l=We(n)!==i||We(o)!==a;return l&&(n=i,o=a),{width:n,height:o,$:l}}function kt(e){return ee(e)?e:e.contextElement}function je(e){const t=kt(e);if(!ae(t))return se(1);const n=t.getBoundingClientRect(),{width:o,height:s,$:i}=bn(t);let a=(i?We(n.width):n.width)/o,l=(i?We(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const Hr=se(0);function Sn(e){const t=Q(e);return!At()||!t.visualViewport?Hr:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function $r(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Q(e)?!1:t}function we(e,t,n,o){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=kt(e);let a=se(1);t&&(o?ee(o)&&(a=je(o)):a=je(e));const l=$r(i,n,o)?Sn(i):se(0);let c=(s.left+l.x)/a.x,d=(s.top+l.y)/a.y,p=s.width/a.x,f=s.height/a.y;if(i){const g=Q(i),h=o&&ee(o)?Q(o):o;let y=g,m=mt(y);for(;m&&o&&h!==y;){const v=je(m),w=m.getBoundingClientRect(),x=te(m),b=w.left+(m.clientLeft+parseFloat(x.paddingLeft))*v.x,S=w.top+(m.clientTop+parseFloat(x.paddingTop))*v.y;c*=v.x,d*=v.y,p*=v.x,f*=v.y,c+=b,d+=S,y=Q(m),m=mt(y)}}return Ue({width:p,height:f,x:c,y:d})}function Je(e,t){const n=Qe(e).scrollLeft;return t?t.left+n:we(le(e)).left+n}function Cn(e,t){const n=e.getBoundingClientRect(),o=n.left+t.scrollLeft-Je(e,n),s=n.top+t.scrollTop;return{x:o,y:s}}function Vr(e){let{elements:t,rect:n,offsetParent:o,strategy:s}=e;const i=s==="fixed",a=le(o),l=t?Ze(t.floating):!1;if(o===a||l&&i)return n;let c={scrollLeft:0,scrollTop:0},d=se(1);const p=se(0),f=ae(o);if((f||!f&&!i)&&((Re(o)!=="body"||Fe(a))&&(c=Qe(o)),ae(o))){const h=we(o);d=je(o),p.x=h.x+o.clientLeft,p.y=h.y+o.clientTop}const g=a&&!f&&!i?Cn(a,c):se(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+p.x+g.x,y:n.y*d.y-c.scrollTop*d.y+p.y+g.y}}function Wr(e){return Array.from(e.getClientRects())}function zr(e){const t=le(e),n=Qe(e),o=e.ownerDocument.body,s=Z(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),i=Z(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let a=-n.scrollLeft+Je(e);const l=-n.scrollTop;return te(o).direction==="rtl"&&(a+=Z(t.clientWidth,o.clientWidth)-s),{width:s,height:i,x:a,y:l}}const nn=25;function Ur(e,t){const n=Q(e),o=le(e),s=n.visualViewport;let i=o.clientWidth,a=o.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const p=At();(!p||p&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}const d=Je(o);if(d<=0){const p=o.ownerDocument,f=p.body,g=getComputedStyle(f),h=p.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,y=Math.abs(o.clientWidth-f.clientWidth-h);y<=nn&&(i-=y)}else d<=nn&&(i+=d);return{width:i,height:a,x:l,y:c}}const Kr=new Set(["absolute","fixed"]);function qr(e,t){const n=we(e,!0,t==="fixed"),o=n.top+e.clientTop,s=n.left+e.clientLeft,i=ae(e)?je(e):se(1),a=e.clientWidth*i.x,l=e.clientHeight*i.y,c=s*i.x,d=o*i.y;return{width:a,height:l,x:c,y:d}}function on(e,t,n){let o;if(t==="viewport")o=Ur(e,n);else if(t==="document")o=zr(le(e));else if(ee(t))o=qr(t,n);else{const s=Sn(e);o={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Ue(o)}function jn(e,t){const n=xe(e);return n===t||!ee(n)||Ne(n)?!1:te(n).position==="fixed"||jn(n,t)}function Gr(e,t){const n=t.get(e);if(n)return n;let o=De(e,[],!1).filter(l=>ee(l)&&Re(l)!=="body"),s=null;const i=te(e).position==="fixed";let a=i?xe(e):e;for(;ee(a)&&!Ne(a);){const l=te(a),c=Et(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&Kr.has(s.position)||Fe(a)&&!c&&jn(e,a))?o=o.filter(p=>p!==a):s=l,a=xe(a)}return t.set(e,o),o}function Yr(e){let{element:t,boundary:n,rootBoundary:o,strategy:s}=e;const a=[...n==="clippingAncestors"?Ze(t)?[]:Gr(t,this._c):[].concat(n),o],l=a[0],c=a.reduce((d,p)=>{const f=on(t,p,s);return d.top=Z(f.top,d.top),d.right=he(f.right,d.right),d.bottom=he(f.bottom,d.bottom),d.left=Z(f.left,d.left),d},on(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Xr(e){const{width:t,height:n}=bn(e);return{width:t,height:n}}function Zr(e,t,n){const o=ae(t),s=le(t),i=n==="fixed",a=we(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=se(0);function d(){c.x=Je(s)}if(o||!o&&!i)if((Re(t)!=="body"||Fe(s))&&(l=Qe(t)),o){const h=we(t,!0,i,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else s&&d();i&&!o&&s&&d();const p=s&&!o&&!i?Cn(s,l):se(0),f=a.left+l.scrollLeft-c.x-p.x,g=a.top+l.scrollTop-c.y-p.y;return{x:f,y:g,width:a.width,height:a.height}}function it(e){return te(e).position==="static"}function rn(e,t){if(!ae(e)||te(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return le(e)===n&&(n=n.ownerDocument.body),n}function Nn(e,t){const n=Q(e);if(Ze(e))return n;if(!ae(e)){let s=xe(e);for(;s&&!Ne(s);){if(ee(s)&&!it(s))return s;s=xe(s)}return n}let o=rn(e,t);for(;o&&Mr(o)&&it(o);)o=rn(o,t);return o&&Ne(o)&&it(o)&&!Et(o)?n:o||Fr(e)||n}const Qr=async function(e){const t=this.getOffsetParent||Nn,n=this.getDimensions,o=await n(e.floating);return{reference:Zr(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function Jr(e){return te(e).direction==="rtl"}const es={convertOffsetParentRelativeRectToViewportRelativeRect:Vr,getDocumentElement:le,getClippingRect:Yr,getOffsetParent:Nn,getElementRects:Qr,getClientRects:Wr,getDimensions:Xr,getScale:je,isElement:ee,isRTL:Jr};function Pn(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function ts(e,t){let n=null,o;const s=le(e);function i(){var l;clearTimeout(o),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:p,top:f,width:g,height:h}=d;if(l||t(),!g||!h)return;const y=He(f),m=He(s.clientWidth-(p+g)),v=He(s.clientHeight-(f+h)),w=He(p),b={rootMargin:-y+"px "+-m+"px "+-v+"px "+-w+"px",threshold:Z(0,he(1,c))||1};let S=!0;function C(j){const R=j[0].intersectionRatio;if(R!==c){if(!S)return a();R?a(!1,R):o=setTimeout(()=>{a(!1,1e-7)},1e3)}R===1&&!Pn(d,e.getBoundingClientRect())&&a(),S=!1}try{n=new IntersectionObserver(C,{...b,root:s.ownerDocument})}catch{n=new IntersectionObserver(C,b)}n.observe(e)}return a(!0),i}function ns(e,t,n,o){o===void 0&&(o={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=o,d=kt(e),p=s||i?[...d?De(d):[],...De(t)]:[];p.forEach(w=>{s&&w.addEventListener("scroll",n,{passive:!0}),i&&w.addEventListener("resize",n)});const f=d&&l?ts(d,n):null;let g=-1,h=null;a&&(h=new ResizeObserver(w=>{let[x]=w;x&&x.target===d&&h&&(h.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),d&&!c&&h.observe(d),h.observe(t));let y,m=c?we(e):null;c&&v();function v(){const w=we(e);m&&!Pn(m,w)&&n(),m=w,y=requestAnimationFrame(v)}return n(),()=>{var w;p.forEach(x=>{s&&x.removeEventListener("scroll",n),i&&x.removeEventListener("resize",n)}),f==null||f(),(w=h)==null||w.disconnect(),h=null,c&&cancelAnimationFrame(y)}}const os=Rr,rs=Er,ss=jr,is=kr,as=Nr,sn=Cr,ls=Ar,cs=(e,t,n)=>{const o=new Map,s={platform:es,...n},i={...s.platform,_c:o};return Sr(e,t,{...s,platform:i})};var ds=typeof document<"u",us=function(){},Ve=ds?u.useLayoutEffect:us;function Ke(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,o,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(o=n;o--!==0;)if(!Ke(e[o],t[o]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(o=n;o--!==0;)if(!{}.hasOwnProperty.call(t,s[o]))return!1;for(o=n;o--!==0;){const i=s[o];if(!(i==="_owner"&&e.$$typeof)&&!Ke(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function Rn(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function an(e,t){const n=Rn(e);return Math.round(t*n)/n}function at(e){const t=u.useRef(e);return Ve(()=>{t.current=e}),t}function fs(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:o=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[p,f]=u.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[g,h]=u.useState(o);Ke(g,o)||h(o);const[y,m]=u.useState(null),[v,w]=u.useState(null),x=u.useCallback(A=>{A!==j.current&&(j.current=A,m(A))},[]),b=u.useCallback(A=>{A!==R.current&&(R.current=A,w(A))},[]),S=i||y,C=a||v,j=u.useRef(null),R=u.useRef(null),N=u.useRef(p),_=c!=null,M=at(c),F=at(s),B=at(d),P=u.useCallback(()=>{if(!j.current||!R.current)return;const A={placement:t,strategy:n,middleware:g};F.current&&(A.platform=F.current),cs(j.current,R.current,A).then($=>{const q={...$,isPositioned:B.current!==!1};E.current&&!Ke(N.current,q)&&(N.current=q,wt.flushSync(()=>{f(q)}))})},[g,t,n,F,B]);Ve(()=>{d===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,f(A=>({...A,isPositioned:!1})))},[d]);const E=u.useRef(!1);Ve(()=>(E.current=!0,()=>{E.current=!1}),[]),Ve(()=>{if(S&&(j.current=S),C&&(R.current=C),S&&C){if(M.current)return M.current(S,C,P);P()}},[S,C,P,M,_]);const I=u.useMemo(()=>({reference:j,floating:R,setReference:x,setFloating:b}),[x,b]),T=u.useMemo(()=>({reference:S,floating:C}),[S,C]),O=u.useMemo(()=>{const A={position:n,left:0,top:0};if(!T.floating)return A;const $=an(T.floating,p.x),q=an(T.floating,p.y);return l?{...A,transform:"translate("+$+"px, "+q+"px)",...Rn(T.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:q}},[n,l,T.floating,p.x,p.y]);return u.useMemo(()=>({...p,update:P,refs:I,elements:T,floatingStyles:O}),[p,P,I,T,O])}const ps=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:o,padding:s}=typeof e=="function"?e(n):e;return o&&t(o)?o.current!=null?sn({element:o.current,padding:s}).fn(n):{}:o?sn({element:o,padding:s}).fn(n):{}}}},ms=(e,t)=>({...os(e),options:[e,t]}),hs=(e,t)=>({...rs(e),options:[e,t]}),xs=(e,t)=>({...ls(e),options:[e,t]}),gs=(e,t)=>({...ss(e),options:[e,t]}),ys=(e,t)=>({...is(e),options:[e,t]}),vs=(e,t)=>({...as(e),options:[e,t]}),ws=(e,t)=>({...ps(e),options:[e,t]});var bs="Arrow",En=u.forwardRef((e,t)=>{const{children:n,width:o=10,height:s=5,...i}=e;return r.jsx(W.svg,{...i,ref:t,width:o,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});En.displayName=bs;var Ss=En,Tt="Popper",[An,kn]=St(Tt),[Cs,Tn]=An(Tt),On=e=>{const{__scopePopper:t,children:n}=e,[o,s]=u.useState(null);return r.jsx(Cs,{scope:t,anchor:o,onAnchorChange:s,children:n})};On.displayName=Tt;var Mn="PopperAnchor",_n=u.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:o,...s}=e,i=Tn(Mn,n),a=u.useRef(null),l=G(t,a),c=u.useRef(null);return u.useEffect(()=>{const d=c.current;c.current=(o==null?void 0:o.current)||a.current,d!==c.current&&i.onAnchorChange(c.current)}),o?null:r.jsx(W.div,{...s,ref:l})});_n.displayName=Mn;var Ot="PopperContent",[js,Ns]=An(Ot),In=u.forwardRef((e,t)=>{var k,V,U,H,L,D;const{__scopePopper:n,side:o="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:p=0,sticky:f="partial",hideWhenDetached:g=!1,updatePositionStrategy:h="optimized",onPlaced:y,...m}=e,v=Tn(Ot,n),[w,x]=u.useState(null),b=G(t,Y=>x(Y)),[S,C]=u.useState(null),j=mn(S),R=(j==null?void 0:j.width)??0,N=(j==null?void 0:j.height)??0,_=o+(i!=="center"?"-"+i:""),M=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},F=Array.isArray(d)?d:[d],B=F.length>0,P={padding:M,boundary:F.filter(Rs),altBoundary:B},{refs:E,floatingStyles:I,placement:T,isPositioned:O,middlewareData:A}=fs({strategy:"fixed",placement:_,whileElementsMounted:(...Y)=>ns(...Y,{animationFrame:h==="always"}),elements:{reference:v.anchor},middleware:[ms({mainAxis:s+N,alignmentAxis:a}),c&&hs({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?xs():void 0,...P}),c&&gs({...P}),ys({...P,apply:({elements:Y,rects:ne,availableWidth:Te,availableHeight:Oe})=>{const{width:Me,height:Ao}=ne.reference,Be=Y.floating.style;Be.setProperty("--radix-popper-available-width",`${Te}px`),Be.setProperty("--radix-popper-available-height",`${Oe}px`),Be.setProperty("--radix-popper-anchor-width",`${Me}px`),Be.setProperty("--radix-popper-anchor-height",`${Ao}px`)}}),S&&ws({element:S,padding:l}),Es({arrowWidth:R,arrowHeight:N}),g&&vs({strategy:"referenceHidden",...P})]}),[$,q]=Fn(T),ce=hn(y);ie(()=>{O&&(ce==null||ce())},[O,ce]);const Ae=(k=A.arrow)==null?void 0:k.x,ke=(V=A.arrow)==null?void 0:V.y,pe=((U=A.arrow)==null?void 0:U.centerOffset)!==0,[Ce,ve]=u.useState();return ie(()=>{w&&ve(window.getComputedStyle(w).zIndex)},[w]),r.jsx("div",{ref:E.setFloating,"data-radix-popper-content-wrapper":"",style:{...I,transform:O?I.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ce,"--radix-popper-transform-origin":[(H=A.transformOrigin)==null?void 0:H.x,(L=A.transformOrigin)==null?void 0:L.y].join(" "),...((D=A.hide)==null?void 0:D.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:r.jsx(js,{scope:n,placedSide:$,onArrowChange:C,arrowX:Ae,arrowY:ke,shouldHideArrow:pe,children:r.jsx(W.div,{"data-side":$,"data-align":q,...m,ref:b,style:{...m.style,animation:O?void 0:"none"}})})})});In.displayName=Ot;var Ln="PopperArrow",Ps={top:"bottom",right:"left",bottom:"top",left:"right"},Dn=u.forwardRef(function(t,n){const{__scopePopper:o,...s}=t,i=Ns(Ln,o),a=Ps[i.placedSide];return r.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:r.jsx(Ss,{...s,ref:n,style:{...s.style,display:"block"}})})});Dn.displayName=Ln;function Rs(e){return e!==null}var Es=e=>({name:"transformOrigin",options:e,fn(t){var v,w,x;const{placement:n,rects:o,middlewareData:s}=t,a=((v=s.arrow)==null?void 0:v.centerOffset)!==0,l=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[d,p]=Fn(n),f={start:"0%",center:"50%",end:"100%"}[p],g=(((w=s.arrow)==null?void 0:w.x)??0)+l/2,h=(((x=s.arrow)==null?void 0:x.y)??0)+c/2;let y="",m="";return d==="bottom"?(y=a?f:`${g}px`,m=`${-c}px`):d==="top"?(y=a?f:`${g}px`,m=`${o.floating.height+c}px`):d==="right"?(y=`${-c}px`,m=a?f:`${h}px`):d==="left"&&(y=`${o.floating.width+c}px`,m=a?f:`${h}px`),{data:{x:y,y:m}}}});function Fn(e){const[t,n="center"]=e.split("-");return[t,n]}var As=On,ks=_n,Ts=In,Os=Dn;function Ms(e){const t=_s(e),n=u.forwardRef((o,s)=>{const{children:i,...a}=o,l=u.Children.toArray(i),c=l.find(Ls);if(c){const d=c.props.children,p=l.map(f=>f===c?u.Children.count(d)>1?u.Children.only(null):u.isValidElement(d)?d.props.children:null:f);return r.jsx(t,{...a,ref:s,children:u.isValidElement(d)?u.cloneElement(d,void 0,p):null})}return r.jsx(t,{...a,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}function _s(e){const t=u.forwardRef((n,o)=>{const{children:s,...i}=n;if(u.isValidElement(s)){const a=Fs(s),l=Ds(i,s.props);return s.type!==u.Fragment&&(l.ref=o?Oo(o,a):a),u.cloneElement(s,l)}return u.Children.count(s)>1?u.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Is=Symbol("radix.slottable");function Ls(e){return u.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Is}function Ds(e,t){const n={...t};for(const o in t){const s=e[o],i=t[o];/^on[A-Z]/.test(o)?s&&i?n[o]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[o]=s):o==="style"?n[o]={...s,...i}:o==="className"&&(n[o]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function Fs(e){var o,s;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Bn=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Bs="VisuallyHidden",Hs=u.forwardRef((e,t)=>r.jsx(W.span,{...e,ref:t,style:{...Bn,...e.style}}));Hs.displayName=Bs;var $s=[" ","Enter","ArrowUp","ArrowDown"],Vs=[" ","Enter"],be="Select",[et,tt,Ws]=Bo(be),[Ee]=St(be,[Ws,kn]),nt=kn(),[zs,ge]=Ee(be),[Us,Ks]=Ee(be),Hn=e=>{const{__scopeSelect:t,children:n,open:o,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:d,name:p,autoComplete:f,disabled:g,required:h,form:y}=e,m=nt(t),[v,w]=u.useState(null),[x,b]=u.useState(null),[S,C]=u.useState(!1),j=Fo(d),[R,N]=ct({prop:o,defaultProp:s??!1,onChange:i,caller:be}),[_,M]=ct({prop:a,defaultProp:l,onChange:c,caller:be}),F=u.useRef(null),B=v?y||!!v.closest("form"):!0,[P,E]=u.useState(new Set),I=Array.from(P).map(T=>T.props.value).join(";");return r.jsx(As,{...m,children:r.jsxs(zs,{required:h,scope:t,trigger:v,onTriggerChange:w,valueNode:x,onValueNodeChange:b,valueNodeHasChildren:S,onValueNodeHasChildrenChange:C,contentId:Ct(),value:_,onValueChange:M,open:R,onOpenChange:N,dir:j,triggerPointerDownPosRef:F,disabled:g,children:[r.jsx(et.Provider,{scope:t,children:r.jsx(Us,{scope:e.__scopeSelect,onNativeOptionAdd:u.useCallback(T=>{E(O=>new Set(O).add(T))},[]),onNativeOptionRemove:u.useCallback(T=>{E(O=>{const A=new Set(O);return A.delete(T),A})},[]),children:n})}),B?r.jsxs(lo,{"aria-hidden":!0,required:h,tabIndex:-1,name:p,autoComplete:f,value:_,onChange:T=>M(T.target.value),disabled:g,form:y,children:[_===void 0?r.jsx("option",{value:""}):null,Array.from(P)]},I):null]})})};Hn.displayName=be;var $n="SelectTrigger",Vn=u.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:o=!1,...s}=e,i=nt(n),a=ge($n,n),l=a.disabled||o,c=G(t,a.onTriggerChange),d=tt(n),p=u.useRef("touch"),[f,g,h]=uo(m=>{const v=d().filter(b=>!b.disabled),w=v.find(b=>b.value===a.value),x=fo(v,m,w);x!==void 0&&a.onValueChange(x.value)}),y=m=>{l||(a.onOpenChange(!0),h()),m&&(a.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return r.jsx(ks,{asChild:!0,...i,children:r.jsx(W.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":co(a.value)?"":void 0,...s,ref:c,onClick:z(s.onClick,m=>{m.currentTarget.focus(),p.current!=="mouse"&&y(m)}),onPointerDown:z(s.onPointerDown,m=>{p.current=m.pointerType;const v=m.target;v.hasPointerCapture(m.pointerId)&&v.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(y(m),m.preventDefault())}),onKeyDown:z(s.onKeyDown,m=>{const v=f.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&g(m.key),!(v&&m.key===" ")&&$s.includes(m.key)&&(y(),m.preventDefault())})})})});Vn.displayName=$n;var Wn="SelectValue",zn=u.forwardRef((e,t)=>{const{__scopeSelect:n,className:o,style:s,children:i,placeholder:a="",...l}=e,c=ge(Wn,n),{onValueNodeHasChildrenChange:d}=c,p=i!==void 0,f=G(t,c.onValueNodeChange);return ie(()=>{d(p)},[d,p]),r.jsx(W.span,{...l,ref:f,style:{pointerEvents:"none"},children:co(c.value)?r.jsx(r.Fragment,{children:a}):i})});zn.displayName=Wn;var qs="SelectIcon",Un=u.forwardRef((e,t)=>{const{__scopeSelect:n,children:o,...s}=e;return r.jsx(W.span,{"aria-hidden":!0,...s,ref:t,children:o||"â–¼"})});Un.displayName=qs;var Gs="SelectPortal",Kn=e=>r.jsx(Ho,{asChild:!0,...e});Kn.displayName=Gs;var Se="SelectContent",qn=u.forwardRef((e,t)=>{const n=ge(Se,e.__scopeSelect),[o,s]=u.useState();if(ie(()=>{s(new DocumentFragment)},[]),!n.open){const i=o;return i?wt.createPortal(r.jsx(Gn,{scope:e.__scopeSelect,children:r.jsx(et.Slot,{scope:e.__scopeSelect,children:r.jsx("div",{children:e.children})})}),i):null}return r.jsx(Yn,{...e,ref:t})});qn.displayName=Se;var J=10,[Gn,ye]=Ee(Se),Ys="SelectContentImpl",Xs=Ms("SelectContent.RemoveScroll"),Yn=u.forwardRef((e,t)=>{const{__scopeSelect:n,position:o="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:d,alignOffset:p,arrowPadding:f,collisionBoundary:g,collisionPadding:h,sticky:y,hideWhenDetached:m,avoidCollisions:v,...w}=e,x=ge(Se,n),[b,S]=u.useState(null),[C,j]=u.useState(null),R=G(t,k=>S(k)),[N,_]=u.useState(null),[M,F]=u.useState(null),B=tt(n),[P,E]=u.useState(!1),I=u.useRef(!1);u.useEffect(()=>{if(b)return $o(b)},[b]),Vo();const T=u.useCallback(k=>{const[V,...U]=B().map(D=>D.ref.current),[H]=U.slice(-1),L=document.activeElement;for(const D of k)if(D===L||(D==null||D.scrollIntoView({block:"nearest"}),D===V&&C&&(C.scrollTop=0),D===H&&C&&(C.scrollTop=C.scrollHeight),D==null||D.focus(),document.activeElement!==L))return},[B,C]),O=u.useCallback(()=>T([N,b]),[T,N,b]);u.useEffect(()=>{P&&O()},[P,O]);const{onOpenChange:A,triggerPointerDownPosRef:$}=x;u.useEffect(()=>{if(b){let k={x:0,y:0};const V=H=>{var L,D;k={x:Math.abs(Math.round(H.pageX)-(((L=$.current)==null?void 0:L.x)??0)),y:Math.abs(Math.round(H.pageY)-(((D=$.current)==null?void 0:D.y)??0))}},U=H=>{k.x<=10&&k.y<=10?H.preventDefault():b.contains(H.target)||A(!1),document.removeEventListener("pointermove",V),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",V),document.addEventListener("pointerup",U,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",V),document.removeEventListener("pointerup",U,{capture:!0})}}},[b,A,$]),u.useEffect(()=>{const k=()=>A(!1);return window.addEventListener("blur",k),window.addEventListener("resize",k),()=>{window.removeEventListener("blur",k),window.removeEventListener("resize",k)}},[A]);const[q,ce]=uo(k=>{const V=B().filter(L=>!L.disabled),U=V.find(L=>L.ref.current===document.activeElement),H=fo(V,k,U);H&&setTimeout(()=>H.ref.current.focus())}),Ae=u.useCallback((k,V,U)=>{const H=!I.current&&!U;(x.value!==void 0&&x.value===V||H)&&(_(k),H&&(I.current=!0))},[x.value]),ke=u.useCallback(()=>b==null?void 0:b.focus(),[b]),pe=u.useCallback((k,V,U)=>{const H=!I.current&&!U;(x.value!==void 0&&x.value===V||H)&&F(k)},[x.value]),Ce=o==="popper"?ht:Xn,ve=Ce===ht?{side:l,sideOffset:c,align:d,alignOffset:p,arrowPadding:f,collisionBoundary:g,collisionPadding:h,sticky:y,hideWhenDetached:m,avoidCollisions:v}:{};return r.jsx(Gn,{scope:n,content:b,viewport:C,onViewportChange:j,itemRefCallback:Ae,selectedItem:N,onItemLeave:ke,itemTextRefCallback:pe,focusSelectedItem:O,selectedItemText:M,position:o,isPositioned:P,searchRef:q,children:r.jsx(Wo,{as:Xs,allowPinchZoom:!0,children:r.jsx(zo,{asChild:!0,trapped:x.open,onMountAutoFocus:k=>{k.preventDefault()},onUnmountAutoFocus:z(s,k=>{var V;(V=x.trigger)==null||V.focus({preventScroll:!0}),k.preventDefault()}),children:r.jsx(Uo,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:k=>k.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:r.jsx(Ce,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:k=>k.preventDefault(),...w,...ve,onPlaced:()=>E(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:z(w.onKeyDown,k=>{const V=k.ctrlKey||k.altKey||k.metaKey;if(k.key==="Tab"&&k.preventDefault(),!V&&k.key.length===1&&ce(k.key),["ArrowUp","ArrowDown","Home","End"].includes(k.key)){let H=B().filter(L=>!L.disabled).map(L=>L.ref.current);if(["ArrowUp","End"].includes(k.key)&&(H=H.slice().reverse()),["ArrowUp","ArrowDown"].includes(k.key)){const L=k.target,D=H.indexOf(L);H=H.slice(D+1)}setTimeout(()=>T(H)),k.preventDefault()}})})})})})})});Yn.displayName=Ys;var Zs="SelectItemAlignedPosition",Xn=u.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:o,...s}=e,i=ge(Se,n),a=ye(Se,n),[l,c]=u.useState(null),[d,p]=u.useState(null),f=G(t,R=>p(R)),g=tt(n),h=u.useRef(!1),y=u.useRef(!0),{viewport:m,selectedItem:v,selectedItemText:w,focusSelectedItem:x}=a,b=u.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&m&&v&&w){const R=i.trigger.getBoundingClientRect(),N=d.getBoundingClientRect(),_=i.valueNode.getBoundingClientRect(),M=w.getBoundingClientRect();if(i.dir!=="rtl"){const L=M.left-N.left,D=_.left-L,Y=R.left-D,ne=R.width+Y,Te=Math.max(ne,N.width),Oe=window.innerWidth-J,Me=qt(D,[J,Math.max(J,Oe-Te)]);l.style.minWidth=ne+"px",l.style.left=Me+"px"}else{const L=N.right-M.right,D=window.innerWidth-_.right-L,Y=window.innerWidth-R.right-D,ne=R.width+Y,Te=Math.max(ne,N.width),Oe=window.innerWidth-J,Me=qt(D,[J,Math.max(J,Oe-Te)]);l.style.minWidth=ne+"px",l.style.right=Me+"px"}const F=g(),B=window.innerHeight-J*2,P=m.scrollHeight,E=window.getComputedStyle(d),I=parseInt(E.borderTopWidth,10),T=parseInt(E.paddingTop,10),O=parseInt(E.borderBottomWidth,10),A=parseInt(E.paddingBottom,10),$=I+T+P+A+O,q=Math.min(v.offsetHeight*5,$),ce=window.getComputedStyle(m),Ae=parseInt(ce.paddingTop,10),ke=parseInt(ce.paddingBottom,10),pe=R.top+R.height/2-J,Ce=B-pe,ve=v.offsetHeight/2,k=v.offsetTop+ve,V=I+T+k,U=$-V;if(V<=pe){const L=F.length>0&&v===F[F.length-1].ref.current;l.style.bottom="0px";const D=d.clientHeight-m.offsetTop-m.offsetHeight,Y=Math.max(Ce,ve+(L?ke:0)+D+O),ne=V+Y;l.style.height=ne+"px"}else{const L=F.length>0&&v===F[0].ref.current;l.style.top="0px";const Y=Math.max(pe,I+m.offsetTop+(L?Ae:0)+ve)+U;l.style.height=Y+"px",m.scrollTop=V-pe+m.offsetTop}l.style.margin=`${J}px 0`,l.style.minHeight=q+"px",l.style.maxHeight=B+"px",o==null||o(),requestAnimationFrame(()=>h.current=!0)}},[g,i.trigger,i.valueNode,l,d,m,v,w,i.dir,o]);ie(()=>b(),[b]);const[S,C]=u.useState();ie(()=>{d&&C(window.getComputedStyle(d).zIndex)},[d]);const j=u.useCallback(R=>{R&&y.current===!0&&(b(),x==null||x(),y.current=!1)},[b,x]);return r.jsx(Js,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:h,onScrollButtonChange:j,children:r.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:r.jsx(W.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Xn.displayName=Zs;var Qs="SelectPopperPosition",ht=u.forwardRef((e,t)=>{const{__scopeSelect:n,align:o="start",collisionPadding:s=J,...i}=e,a=nt(n);return r.jsx(Ts,{...a,...i,ref:t,align:o,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ht.displayName=Qs;var[Js,Mt]=Ee(Se,{}),xt="SelectViewport",Zn=u.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:o,...s}=e,i=ye(xt,n),a=Mt(xt,n),l=G(t,i.onViewportChange),c=u.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),r.jsx(et.Slot,{scope:n,children:r.jsx(W.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:z(s.onScroll,d=>{const p=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:g}=a;if(g!=null&&g.current&&f){const h=Math.abs(c.current-p.scrollTop);if(h>0){const y=window.innerHeight-J*2,m=parseFloat(f.style.minHeight),v=parseFloat(f.style.height),w=Math.max(m,v);if(w<y){const x=w+h,b=Math.min(y,x),S=x-b;f.style.height=b+"px",f.style.bottom==="0px"&&(p.scrollTop=S>0?S:0,f.style.justifyContent="flex-end")}}}c.current=p.scrollTop})})})]})});Zn.displayName=xt;var Qn="SelectGroup",[ei,ti]=Ee(Qn),ni=u.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e,s=Ct();return r.jsx(ei,{scope:n,id:s,children:r.jsx(W.div,{role:"group","aria-labelledby":s,...o,ref:t})})});ni.displayName=Qn;var Jn="SelectLabel",eo=u.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e,s=ti(Jn,n);return r.jsx(W.div,{id:s.id,...o,ref:t})});eo.displayName=Jn;var qe="SelectItem",[oi,to]=Ee(qe),no=u.forwardRef((e,t)=>{const{__scopeSelect:n,value:o,disabled:s=!1,textValue:i,...a}=e,l=ge(qe,n),c=ye(qe,n),d=l.value===o,[p,f]=u.useState(i??""),[g,h]=u.useState(!1),y=G(t,x=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,x,o,s)}),m=Ct(),v=u.useRef("touch"),w=()=>{s||(l.onValueChange(o),l.onOpenChange(!1))};if(o==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(oi,{scope:n,value:o,disabled:s,textId:m,isSelected:d,onItemTextChange:u.useCallback(x=>{f(b=>b||((x==null?void 0:x.textContent)??"").trim())},[]),children:r.jsx(et.ItemSlot,{scope:n,value:o,disabled:s,textValue:p,children:r.jsx(W.div,{role:"option","aria-labelledby":m,"data-highlighted":g?"":void 0,"aria-selected":d&&g,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:y,onFocus:z(a.onFocus,()=>h(!0)),onBlur:z(a.onBlur,()=>h(!1)),onClick:z(a.onClick,()=>{v.current!=="mouse"&&w()}),onPointerUp:z(a.onPointerUp,()=>{v.current==="mouse"&&w()}),onPointerDown:z(a.onPointerDown,x=>{v.current=x.pointerType}),onPointerMove:z(a.onPointerMove,x=>{var b;v.current=x.pointerType,s?(b=c.onItemLeave)==null||b.call(c):v.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:z(a.onPointerLeave,x=>{var b;x.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:z(a.onKeyDown,x=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&x.key===" "||(Vs.includes(x.key)&&w(),x.key===" "&&x.preventDefault())})})})})});no.displayName=qe;var Le="SelectItemText",oo=u.forwardRef((e,t)=>{const{__scopeSelect:n,className:o,style:s,...i}=e,a=ge(Le,n),l=ye(Le,n),c=to(Le,n),d=Ks(Le,n),[p,f]=u.useState(null),g=G(t,w=>f(w),c.onItemTextChange,w=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,w,c.value,c.disabled)}),h=p==null?void 0:p.textContent,y=u.useMemo(()=>r.jsx("option",{value:c.value,disabled:c.disabled,children:h},c.value),[c.disabled,c.value,h]),{onNativeOptionAdd:m,onNativeOptionRemove:v}=d;return ie(()=>(m(y),()=>v(y)),[m,v,y]),r.jsxs(r.Fragment,{children:[r.jsx(W.span,{id:c.textId,...i,ref:g}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?wt.createPortal(i.children,a.valueNode):null]})});oo.displayName=Le;var ro="SelectItemIndicator",so=u.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e;return to(ro,n).isSelected?r.jsx(W.span,{"aria-hidden":!0,...o,ref:t}):null});so.displayName=ro;var gt="SelectScrollUpButton",ri=u.forwardRef((e,t)=>{const n=ye(gt,e.__scopeSelect),o=Mt(gt,e.__scopeSelect),[s,i]=u.useState(!1),a=G(t,o.onScrollButtonChange);return ie(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?r.jsx(io,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});ri.displayName=gt;var yt="SelectScrollDownButton",si=u.forwardRef((e,t)=>{const n=ye(yt,e.__scopeSelect),o=Mt(yt,e.__scopeSelect),[s,i]=u.useState(!1),a=G(t,o.onScrollButtonChange);return ie(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,p=Math.ceil(c.scrollTop)<d;i(p)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?r.jsx(io,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});si.displayName=yt;var io=u.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:o,...s}=e,i=ye("SelectScrollButton",n),a=u.useRef(null),l=tt(n),c=u.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return u.useEffect(()=>()=>c(),[c]),ie(()=>{var p;const d=l().find(f=>f.ref.current===document.activeElement);(p=d==null?void 0:d.ref.current)==null||p.scrollIntoView({block:"nearest"})},[l]),r.jsx(W.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:z(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(o,50))}),onPointerMove:z(s.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),a.current===null&&(a.current=window.setInterval(o,50))}),onPointerLeave:z(s.onPointerLeave,()=>{c()})})}),ii="SelectSeparator",ao=u.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e;return r.jsx(W.div,{"aria-hidden":!0,...o,ref:t})});ao.displayName=ii;var vt="SelectArrow",ai=u.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e,s=nt(n),i=ge(vt,n),a=ye(vt,n);return i.open&&a.position==="popper"?r.jsx(Os,{...s,...o,ref:t}):null});ai.displayName=vt;var li="SelectBubbleInput",lo=u.forwardRef(({__scopeSelect:e,value:t,...n},o)=>{const s=u.useRef(null),i=G(o,s),a=xn(t);return u.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==t&&p){const f=new Event("change",{bubbles:!0});p.call(l,t),l.dispatchEvent(f)}},[a,t]),r.jsx(W.select,{...n,style:{...Bn,...n.style},ref:i,defaultValue:t})});lo.displayName=li;function co(e){return e===""||e===void 0}function uo(e){const t=hn(e),n=u.useRef(""),o=u.useRef(0),s=u.useCallback(a=>{const l=n.current+a;t(l),function c(d){n.current=d,window.clearTimeout(o.current),d!==""&&(o.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=u.useCallback(()=>{n.current="",window.clearTimeout(o.current)},[]);return u.useEffect(()=>()=>window.clearTimeout(o.current),[]),[n,s,i]}function fo(e,t,n){const s=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let a=ci(e,Math.max(i,0));s.length===1&&(a=a.filter(d=>d!==n));const c=a.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function ci(e,t){return e.map((n,o)=>e[(t+o)%e.length])}var di=Hn,po=Vn,ui=zn,fi=Un,pi=Kn,mo=qn,mi=Zn,ho=eo,xo=no,hi=oo,xi=so,go=ao;const yo=di,vo=ui,_t=u.forwardRef(({className:e,children:t,...n},o)=>r.jsxs(po,{ref:o,className:K("flex h-10 w-full items-center justify-between rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...n,children:[t,r.jsx(fi,{asChild:!0,children:r.jsx(tr,{className:"h-4 w-4 opacity-50"})})]}));_t.displayName=po.displayName;const It=u.forwardRef(({className:e,children:t,position:n="popper",...o},s)=>r.jsx(pi,{children:r.jsx(mo,{ref:s,className:K("relative z-50 min-w-[8rem] overflow-hidden rounded-md border border-gray-300 bg-white text-gray-900 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...o,children:r.jsx(mi,{className:K("max-h-[var(--radix-select-content-available-height)] overflow-y-auto p-1",n==="popper"&&"w-full min-w-[var(--radix-select-trigger-width)]"),children:t})})}));It.displayName=mo.displayName;const gi=u.forwardRef(({className:e,...t},n)=>r.jsx(ho,{ref:n,className:K("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));gi.displayName=ho.displayName;const Ge=u.forwardRef(({className:e,children:t,...n},o)=>r.jsxs(xo,{ref:o,className:K("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(xi,{children:r.jsx(pn,{className:"h-4 w-4"})})}),r.jsx(hi,{children:t})]}));Ge.displayName=xo.displayName;const yi=u.forwardRef(({className:e,...t},n)=>r.jsx(go,{ref:n,className:K("-mx-1 my-1 h-px bg-gray-200",e),...t}));yi.displayName=go.displayName;const vi=[{value:oe.DISCOUNT,label:"Largest Discount"},{value:oe.CHEAPEST,label:"Cheapest"},{value:oe.UNIT_PRICE,label:"Best Unit Price"},{value:oe.DISTANCE,label:"Nearest Store"},{value:oe.NEWEST,label:"Newest"}],wi=({value:e,onChange:t})=>r.jsxs(yo,{value:e,onValueChange:t,children:[r.jsx(_t,{id:"sort",className:"w-full",children:r.jsx(vo,{})}),r.jsx(It,{children:vi.map(n=>r.jsx(Ge,{value:n.value,children:n.label},n.value))})]}),bi=[{value:"Fruit & Vegetables",label:"Fruit & Vegetables",group:"Fresh"},{value:"Meat & Seafood",label:"Meat & Seafood",group:"Fresh"},{value:"Chilled, Dairy & Eggs",label:"Dairy & Eggs",group:"Fresh"},{value:"Bakery",label:"Bakery",group:"Fresh"},{value:"Pantry",label:"Pantry",group:"Pantry & Frozen"},{value:"Frozen",label:"Frozen",group:"Pantry & Frozen"},{value:"Drinks",label:"Drinks",group:"Pantry & Frozen"},{value:"Snacks & Confectionery",label:"Snacks & Confectionery",group:"Pantry & Frozen"},{value:"Health & Beauty",label:"Health & Beauty",group:"Non-Food"},{value:"Household",label:"Household",group:"Non-Food"},{value:"Baby & Child",label:"Baby & Child",group:"Non-Food"},{value:"Pet",label:"Pet",group:"Non-Food"},{value:"Beer, Wine & Cider",label:"Beer, Wine & Cider",group:"Other"}],Si=bi.reduce((e,t)=>(e[t.group]||(e[t.group]=[]),e[t.group].push(t),e),{}),Ci=({value:e,onChange:t})=>r.jsxs(yo,{value:e||"all",onValueChange:n=>t(n==="all"?void 0:n),children:[r.jsx(_t,{id:"category",className:"w-full",children:r.jsx(vo,{placeholder:"All Categories"})}),r.jsxs(It,{children:[r.jsx(Ge,{value:"all",children:"All Categories"}),Object.entries(Si).map(([n,o])=>r.jsxs("div",{children:[r.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-muted-foreground",children:n}),o.map(s=>r.jsx(Ge,{value:s.value,children:s.label},s.value))]},n))]})]});var ot="Checkbox",[ji]=St(ot),[Ni,Lt]=ji(ot);function Pi(e){const{__scopeCheckbox:t,checked:n,children:o,defaultChecked:s,disabled:i,form:a,name:l,onCheckedChange:c,required:d,value:p="on",internal_do_not_use_render:f}=e,[g,h]=ct({prop:n,defaultProp:s??!1,onChange:c,caller:ot}),[y,m]=u.useState(null),[v,w]=u.useState(null),x=u.useRef(!1),b=y?!!a||!!y.closest("form"):!0,S={checked:g,disabled:i,setChecked:h,control:y,setControl:m,name:l,form:a,value:p,hasConsumerStoppedPropagationRef:x,required:d,defaultChecked:me(s)?!1:s,isFormControl:b,bubbleInput:v,setBubbleInput:w};return r.jsx(Ni,{scope:t,...S,children:Ri(f)?f(S):o})}var wo="CheckboxTrigger",bo=u.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...o},s)=>{const{control:i,value:a,disabled:l,checked:c,required:d,setControl:p,setChecked:f,hasConsumerStoppedPropagationRef:g,isFormControl:h,bubbleInput:y}=Lt(wo,e),m=G(s,p),v=u.useRef(c);return u.useEffect(()=>{const w=i==null?void 0:i.form;if(w){const x=()=>f(v.current);return w.addEventListener("reset",x),()=>w.removeEventListener("reset",x)}},[i,f]),r.jsx(W.button,{type:"button",role:"checkbox","aria-checked":me(c)?"mixed":c,"aria-required":d,"data-state":Po(c),"data-disabled":l?"":void 0,disabled:l,value:a,...o,ref:m,onKeyDown:z(t,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:z(n,w=>{f(x=>me(x)?!0:!x),y&&h&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})})});bo.displayName=wo;var Dt=u.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:o,checked:s,defaultChecked:i,required:a,disabled:l,value:c,onCheckedChange:d,form:p,...f}=e;return r.jsx(Pi,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:l,required:a,onCheckedChange:d,name:o,form:p,value:c,internal_do_not_use_render:({isFormControl:g})=>r.jsxs(r.Fragment,{children:[r.jsx(bo,{...f,ref:t,__scopeCheckbox:n}),g&&r.jsx(No,{__scopeCheckbox:n})]})})});Dt.displayName=ot;var So="CheckboxIndicator",Co=u.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:o,...s}=e,i=Lt(So,n);return r.jsx(Ko,{present:o||me(i.checked)||i.checked===!0,children:r.jsx(W.span,{"data-state":Po(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});Co.displayName=So;var jo="CheckboxBubbleInput",No=u.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:o,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:a,required:l,disabled:c,name:d,value:p,form:f,bubbleInput:g,setBubbleInput:h}=Lt(jo,e),y=G(n,h),m=xn(i),v=mn(o);u.useEffect(()=>{const x=g;if(!x)return;const b=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(b,"checked").set,j=!s.current;if(m!==i&&C){const R=new Event("click",{bubbles:j});x.indeterminate=me(i),C.call(x,me(i)?!1:i),x.dispatchEvent(R)}},[g,m,i,s]);const w=u.useRef(me(i)?!1:i);return r.jsx(W.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??w.current,required:l,disabled:c,name:d,value:p,form:f,...t,tabIndex:-1,ref:y,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});No.displayName=jo;function Ri(e){return typeof e=="function"}function me(e){return e==="indeterminate"}function Po(e){return me(e)?"indeterminate":e?"checked":"unchecked"}const Ft=u.forwardRef(({className:e,...t},n)=>r.jsx(Dt,{ref:n,className:K("peer h-4 w-4 shrink-0 rounded-sm border border-gray-300 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-blue-600 data-[state=checked]:border-blue-600 data-[state=checked]:text-white",e),...t,children:r.jsx(Co,{className:K("flex items-center justify-center text-current"),children:r.jsx(pn,{className:"h-3 w-3"})})}));Ft.displayName=Dt.displayName;var Ei=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ai=Ei.reduce((e,t)=>{const n=Mo(`Primitive.${t}`),o=u.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:i})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),ki="Label",Ro=u.forwardRef((e,t)=>r.jsx(Ai.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Ro.displayName=ki;var Eo=Ro;const Bt=u.forwardRef(({className:e,...t},n)=>r.jsx(Eo,{ref:n,className:K("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));Bt.displayName=Eo.displayName;const ln=[{value:"paknsave",label:"PAK'nSAVE"},{value:"countdown",label:"Woolworths"},{value:"new_world",label:"New World"}],Ti=({selected:e,onChange:t})=>{const n=i=>{const a=e.includes(i)?e.filter(l=>l!==i):[...e,i];t(a)},o=()=>{t(ln.map(i=>i.value))},s=()=>{t([])};return r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"flex justify-end",children:r.jsxs("div",{className:"flex gap-2 text-xs",children:[r.jsx("button",{onClick:o,className:"text-primary hover:text-accent transition-colors",children:"Select All"}),e.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-muted-foreground",children:"|"}),r.jsx("button",{onClick:s,className:"text-muted-foreground hover:text-foreground transition-colors",children:"Clear"})]})]})}),r.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2 pr-2",children:ln.map(i=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ft,{id:i.value,checked:e.includes(i.value),onCheckedChange:()=>n(i.value)}),r.jsx(Bt,{htmlFor:i.value,className:"text-sm font-normal cursor-pointer",children:i.label})]},i.value))})]})},Oi=({checked:e,onChange:t})=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ft,{id:"promo-only",checked:e,onCheckedChange:n=>t(n===!0)}),r.jsx(Bt,{htmlFor:"promo-only",className:"text-sm font-medium cursor-pointer",children:"Promo items only"})]}),_e=0,Ie=200,Mi=1,_i=({min:e,max:t,onChange:n})=>{const[o,s]=u.useState([e??_e,t??Ie]);return u.useEffect(()=>{const i=typeof e=="number"?e:_e,a=typeof t=="number"?t:Ie,l=i<=a?[i,a]:[a,i];s(c=>c[0]===l[0]&&c[1]===l[1]?c:l)},[e,t]),u.useEffect(()=>{const i=setTimeout(()=>{const[a,l]=o,c=a!==_e?a:void 0,d=l!==Ie?l:void 0;(typeof e=="number"?e===c:c===void 0)&&(typeof t=="number"?t===d:d===void 0)||n(c,d)},350);return()=>clearTimeout(i)},[o,e,t,n]),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-right text-sm text-tertiary-gray",children:["$",Math.round(o[0])," - $",Math.round(o[1])]}),r.jsx(dt,{value:o,min:_e,max:Ie,step:Mi,onValueChange:i=>{if(i.length<2)return;const a=Math.min(i[0],i[1]),l=Math.max(i[0],i[1]);s([a,l])}}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-tertiary-gray",children:[r.jsxs("span",{children:["$",_e]}),r.jsxs("span",{children:["$",Ie,"+"]})]})]})},Ii=({isOpen:e,onClose:t})=>{const{filters:n,updateFilters:o,clearFilters:s,activeFilterCount:i}=jt();return r.jsxs(r.Fragment,{children:[e&&r.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-30 lg:hidden",onClick:t}),r.jsx("aside",{className:`
          fixed lg:sticky top-0 lg:top-0 left-0 h-[100dvh] lg:max-h-screen w-72 bg-white
          transform transition-all duration-300 ease-out z-40
          ${e?"translate-x-0 shadow-xl lg:shadow-none":"-translate-x-full"}
          border-r border-border/40 lg:self-start
        `,children:r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsxs("div",{className:"px-6 py-5 border-b border-border/40",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h2",{className:"text-lg font-semibold text-primary-gray tracking-tight",children:"Filters"}),i>0&&r.jsx(fn,{className:"bg-primary/10 text-primary border-primary/20 text-xs px-2",children:i})]}),r.jsx(X,{variant:"ghost",size:"icon",onClick:t,className:"lg:hidden -mr-2 hover:bg-gray-100 rounded-lg",children:r.jsx(Ut,{className:"h-4 w-4"})})]}),i>0&&r.jsxs(X,{variant:"ghost",size:"sm",onClick:s,className:"w-full justify-start text-secondary-gray hover:text-primary-gray hover:bg-gray-50 rounded-lg -ml-2",children:[r.jsx(Ut,{className:"h-4 w-4 mr-2"}),"Clear all filters"]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-8",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(rr,{className:"h-4 w-4 text-primary"}),r.jsx("label",{className:"text-sm font-semibold text-primary-gray",children:"Category"})]}),r.jsx(Ci,{value:n.category,onChange:a=>o({category:a})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Jo,{className:"h-4 w-4 text-primary"}),r.jsx("label",{className:"text-sm font-semibold text-primary-gray",children:"Sort By"})]}),r.jsx(wi,{value:n.sort||oe.BEST_VALUE,onChange:a=>o({sort:a})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(ar,{className:"h-4 w-4 text-primary"}),r.jsx("label",{className:"text-sm font-semibold text-primary-gray",children:"Deals & Promos"})]}),r.jsx(Oi,{checked:n.promo_only||!1,onChange:a=>o({promo_only:a})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(or,{className:"h-4 w-4 text-primary"}),r.jsx("label",{className:"text-sm font-semibold text-primary-gray",children:"Price Range"})]}),r.jsx(_i,{min:n.price_min,max:n.price_max,onChange:(a,l)=>o({price_min:a,price_max:l})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(_o,{className:"h-4 w-4 text-primary"}),r.jsx("label",{className:"text-sm font-semibold text-primary-gray",children:"Stores"})]}),r.jsx(Ti,{selected:n.chains||[],onChange:a=>o({chains:a})})]})]})]})})]})};async function cn(e){try{const t=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e.lat}&lon=${e.lon}&zoom=14&addressdetails=1`,{headers:{"User-Agent":"Grocify/1.0"}});if(!t.ok)return console.error("Reverse geocoding failed:",t.statusText),null;const n=await t.json();if(!n||n.error)return console.error("Reverse geocoding error:",n==null?void 0:n.error),null;const o=n.address||{},s=o.suburb||o.neighbourhood||o.hamlet,i=o.city||o.town||o.village||o.municipality,a=o.state||o.region,l=[s,i,a].filter(Boolean);return{address:l.length>0?l.join(", "):n.display_name,suburb:s,city:i,region:a}}catch(t){return console.error("Error reverse geocoding:",t),null}}function dn(e,t){return e?e.address:`${t.lat.toFixed(4)}, ${t.lon.toFixed(4)}`}const Li=()=>{const{location:e,radiusKm:t,loading:n,error:o,isLocationModalOpen:s,closeLocationModal:i,requestAutoLocation:a,setManualLocation:l,setRadiusKm:c,isLocationSet:d}=Ye(),[p,f]=u.useState("initial"),[g,h]=u.useState(t),[y,m]=u.useState(e),[v,w]=u.useState("");u.useEffect(()=>{s&&(d&&e?(f("auto-success"),m(e),h(t)):(f("initial"),h(t)))},[s,d,e,t]),u.useEffect(()=>{e&&cn(e).then(N=>{w(N?dn(N,e):`${e.lat.toFixed(4)}, ${e.lon.toFixed(4)}`)})},[e]);const x=async()=>{try{await a(),f("auto-success")}catch{f("manual-map")}},b=()=>{f("manual-map"),y||m({lat:-41.2924,lon:174.7787})},S=async(N,_)=>{m({lat:N,lon:_});const M=await cn({lat:N,lon:_});w(M?dn(M,{lat:N,lon:_}):`${N.toFixed(4)}, ${_.toFixed(4)}`)},C=()=>{y&&(l(y.lat,y.lon,g),i(),Vt.success("Location set",{description:`Finding products within ${g}km`,duration:3e3}))},j=()=>{c(g),i(),Vt.success("Location updated",{description:`Search radius set to ${g}km`,duration:3e3})},R=d;return r.jsx(qo,{open:s,onOpenChange:R?i:void 0,children:r.jsxs(Go,{className:`sm:max-w-[600px] ${R?"":"[&>button]:hidden"}`,onPointerDownOutside:N=>!R&&N.preventDefault(),onEscapeKeyDown:N=>!R&&N.preventDefault(),children:[p==="initial"&&r.jsxs(r.Fragment,{children:[r.jsxs(rt,{children:[r.jsx(st,{children:"Set Your Location"}),r.jsx(Gt,{children:"To show you products from nearby stores, we need your location."})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[o&&r.jsxs("div",{className:"flex items-start gap-2 p-3 bg-red-50 border border-red-200 rounded-md",children:[r.jsx(Yt,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),r.jsx("p",{className:"text-sm text-red-800",children:o})]}),r.jsx(X,{onClick:x,disabled:n,className:"w-full h-14 text-lg",size:"lg",children:n?r.jsxs(r.Fragment,{children:[r.jsx(Zo,{className:"w-5 h-5 mr-2 animate-spin"}),"Getting location..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ut,{className:"w-5 h-5 mr-2"}),"Use My Location"]})}),r.jsxs(X,{onClick:b,variant:"outline",className:"w-full h-14 text-lg",size:"lg",disabled:n,children:[r.jsx(bt,{className:"w-5 h-5 mr-2"}),"Set Location on Map"]})]})]}),p==="auto-success"&&e&&r.jsxs(r.Fragment,{children:[r.jsx(rt,{children:r.jsxs(st,{className:"flex items-center gap-2",children:[r.jsx(er,{className:"w-6 h-6 text-green-600"}),"Location Set"]})}),r.jsxs("div",{className:"space-y-6 py-4",children:[r.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-md",children:[r.jsx("p",{className:"text-sm text-green-800 mb-1",children:"Using your current location"}),r.jsx("p",{className:"text-sm font-medium text-green-900",children:v||"Loading address..."}),r.jsxs("p",{className:"text-xs text-green-700 mt-1",children:[e.lat.toFixed(4),", ",e.lon.toFixed(4)]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Search Radius: ",g,"km"]}),r.jsx(dt,{value:[g],onValueChange:N=>h(N[0]),min:1,max:10,step:1,className:"w-full"}),r.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[r.jsx("span",{children:"1km"}),r.jsx("span",{children:"10km"})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(X,{variant:"outline",onClick:()=>f("manual-map"),className:"flex-1",children:"Adjust Manually"}),r.jsx(X,{onClick:j,className:"flex-1",children:"Continue"})]})]})]}),p==="manual-map"&&r.jsxs(r.Fragment,{children:[r.jsxs(rt,{children:[r.jsx(st,{children:"Set Location on Map"}),r.jsx(Gt,{children:"Drag the pin to your approximate location"})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[o&&r.jsxs("div",{className:"flex items-start gap-2 p-3 bg-red-50 border border-red-200 rounded-md",children:[r.jsx(Yt,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),r.jsx("p",{className:"text-sm text-red-800",children:o})]}),r.jsx("div",{className:"border rounded-lg overflow-hidden h-[400px]",children:r.jsx(Yo,{userLocation:y||{lat:-41.2924,lon:174.7787},stores:[],onLocationChange:S,isDraggable:!0,radiusKm:g,fallbackClassName:"h-[400px] border-none"})}),y&&r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm font-medium text-primary-gray",children:v||"Loading address..."}),r.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[y.lat.toFixed(4),", ",y.lon.toFixed(4)]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Search Radius: ",g,"km"]}),r.jsx(dt,{value:[g],onValueChange:N=>h(N[0]),min:1,max:10,step:1,className:"w-full"}),r.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[r.jsx("span",{children:"1km"}),r.jsx("span",{children:"10km"})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(X,{variant:"outline",onClick:()=>f("initial"),className:"flex-1",children:"Back"}),r.jsx(X,{onClick:C,className:"flex-1",children:"Confirm Location"})]})]})]})]})})},Di=({children:e})=>{const{isLocationSet:t,openLocationModal:n}=Ye();return u.useEffect(()=>{t||n()},[t,n]),r.jsxs(r.Fragment,{children:[r.jsx(Li,{}),e]})},Fi="http://localhost:8000",lt=24,Bi=()=>{const[e,t]=u.useState([]),[n,o]=u.useState(0),[s,i]=u.useState(!1),[a,l]=u.useState(null),[c,d]=u.useState(1),p=u.useRef(null),f=u.useRef(0),g=Math.ceil(n/lt),h=u.useCallback(async(v,w=1)=>{var S;f.current+=1;const x=f.current;(S=p.current)==null||S.abort();const b=new AbortController;p.current=b,i(!0),l(null),d(w);try{const C=Io(v);C.append("page_size",lt.toString()),C.append("page",w.toString());const{data:j}=await Kt.get(`${Fi}/products`,{params:C,signal:b.signal});if(x!==f.current)return;t(j.items),o(j.total)}catch(C){if(Kt.isCancel(C)||x!==f.current)return;l("Failed to load products"),t([]),o(0)}finally{x===f.current&&i(!1)}},[]);u.useEffect(()=>()=>{var v;(v=p.current)==null||v.abort()},[]);const y=u.useCallback(v=>{v>=1&&v<=g&&(d(v),window.scrollTo({top:0,behavior:"smooth"}))},[g]),m=u.useCallback(()=>{t([]),o(0)},[]);return{products:e,total:n,loading:s,error:a,currentPage:c,totalPages:g,pageSize:lt,fetchProducts:h,goToPage:y,clearProducts:m}},Hi=({className:e,...t})=>r.jsx("nav",{role:"navigation","aria-label":"pagination",className:K("mx-auto flex w-full justify-center",e),...t}),$i=({className:e,...t})=>r.jsx("ul",{className:K("flex flex-row items-center gap-1",e),...t}),$e=({className:e,...t})=>r.jsx("li",{className:K("",e),...t}),Ht=({className:e,isActive:t,size:n="icon",...o})=>r.jsx("a",{"aria-current":t?"page":void 0,className:K(Lo({variant:t?"default":"outline",size:n}),"cursor-pointer",e),...o}),Vi=({className:e,...t})=>r.jsxs(Ht,{"aria-label":"Go to previous page",size:"default",className:K("gap-1 pl-2.5",e),...t,children:[r.jsx(nr,{className:"h-4 w-4"}),r.jsx("span",{children:"Previous"})]}),Wi=({className:e,...t})=>r.jsxs(Ht,{"aria-label":"Go to next page",size:"default",className:K("gap-1 pr-2.5",e),...t,children:[r.jsx("span",{children:"Next"}),r.jsx(Qo,{className:"h-4 w-4"})]}),zi=({className:e,...t})=>r.jsxs("span",{"aria-hidden":!0,className:K("flex h-9 w-9 items-center justify-center",e),...t,children:[r.jsx(sr,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"More pages"})]}),Xi=()=>{const[t,n]=un(),[o,s]=u.useState(""),[i,a]=u.useState(!0),{location:l,radiusKm:c,isLocationSet:d,openLocationModal:p,requestAutoLocation:f,loading:g,error:h}=Ye(),{filters:y}=jt(),{products:m,total:v,loading:w,error:x,currentPage:b,totalPages:S,fetchProducts:C,goToPage:j,clearProducts:R}=Bi(),N=parseInt(t.get("page")||"1",10),_=u.useRef(null);u.useEffect(()=>{s(y.query||"")},[y.query]),u.useEffect(()=>{if(!l||!d)return;const P=JSON.stringify({filters:y,location:l,radiusKm:c,isLocationSet:d}),E=_.current,I=!!(E&&E.page!==N&&E.nonPageKey===P);_.current={page:N,nonPageKey:P};const T={...y,lat:l.lat,lon:l.lon,radius_km:c};if(I){C(T,N);return}R();const O=window.setTimeout(()=>{C(T,N)},220);return()=>window.clearTimeout(O)},[y,l,c,N,d,R]);const M=P=>{const E=new URLSearchParams(t);E.set("page",P.toString()),n(E),j(P)},F=()=>{const P=[];if(S<=7)for(let I=1;I<=S;I++)P.push(I);else{P.push(1),b>3&&P.push("ellipsis");const I=Math.max(2,b-1),T=Math.min(S-1,b+1);for(let O=I;O<=T;O++)P.push(O);b<S-2&&P.push("ellipsis"),P.push(S)}return P},B=()=>{const P=o.trim(),E=new URLSearchParams(t);P?E.set("q",P):E.delete("q"),E.delete("page"),n(E)};return r.jsx(Di,{children:r.jsxs("div",{className:"min-h-screen bg-secondary",children:[r.jsxs("div",{className:"sticky top-0 z-50 bg-secondary",children:[r.jsx(lr,{query:o,setQuery:s,onSearch:B,variant:"compact"}),r.jsx(cr,{onOpenFilters:()=>a(!0)})]}),r.jsxs("div",{className:"flex",children:[r.jsx(Ii,{isOpen:i,onClose:()=>a(!1)}),r.jsx("main",{className:"flex-1 overflow-y-auto min-h-screen overscroll-none",children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6 pb-32",children:[!d&&r.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:r.jsxs(Do,{className:"p-8 text-center max-w-md border bg-card",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-lg bg-secondary mb-4",children:r.jsx(ut,{className:"h-6 w-6 text-primary"})}),r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Location Required"}),r.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Enable location to see products from stores in your area."}),h&&r.jsx("div",{className:"mb-4 p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:r.jsx("p",{className:"text-sm text-destructive",children:h})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{onClick:f,disabled:g,className:"w-full",children:g?"Getting location...":r.jsxs(r.Fragment,{children:[r.jsx(ut,{className:"h-4 w-4 mr-2"}),"Use My Location"]})}),r.jsxs(X,{onClick:p,variant:"outline",className:"w-full",children:[r.jsx(bt,{className:"h-4 w-4 mr-2"}),"Set Manually"]})]})]})}),d&&r.jsxs(r.Fragment,{children:[x&&r.jsx("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4 mb-4",children:r.jsx("p",{className:"text-sm text-destructive",children:x})}),!w&&m.length>0&&r.jsxs("div",{className:"mb-4 flex items-center justify-between text-sm text-muted-foreground",children:[r.jsx("span",{children:v===0?"No products found":`${(b-1)*24+1}-${Math.min(b*24,v)} of ${v}`}),r.jsxs("span",{children:["Page ",b," of ",S]})]}),r.jsx(Xo,{products:m,loading:w}),!w&&m.length>0&&S>1&&r.jsx("div",{className:"mt-6",children:r.jsx(Hi,{children:r.jsxs($i,{children:[r.jsx($e,{children:r.jsx(Vi,{onClick:()=>b>1&&M(b-1),className:b===1?"pointer-events-none opacity-50":""})}),F().map((P,E)=>P==="ellipsis"?r.jsx($e,{children:r.jsx(zi,{})},`ellipsis-${E}`):r.jsx($e,{children:r.jsx(Ht,{onClick:()=>M(P),isActive:b===P,children:P})},P)),r.jsx($e,{children:r.jsx(Wi,{onClick:()=>b<S&&M(b+1),className:b===S?"pointer-events-none opacity-50":""})})]})})}),!w&&m.length===0&&r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-muted-foreground",children:"No products found. Try adjusting your filters."})})]})]})})]})]})})};export{Xi as Explore,Xi as default};

import{j as e,W as y,u as j,m as u,i as v,k as w,d as k,n as S}from"./ui-vendor-DequXtLf.js";import{g as P,u as C,r}from"./react-vendor-M7dDMeuj.js";import{C as t,f as l,B as d,a as o}from"./input-C4EhYCMY.js";import{H as m}from"./Header-BTkoquYf.js";import"./index-BZiTwUF9.js";const B=()=>{const{id:c}=P(),x=C(),[s,g]=r.useState(null),[N,p]=r.useState(!0),[h,f]=r.useState(null);if(r.useEffect(()=>{c&&(async()=>{try{p(!0);const a=await fetch(`http://localhost:8000/products/${c}`);if(!a.ok)throw new Error("Product not found");const _=await a.json();g(_)}catch(a){f(a instanceof Error?a.message:"Failed to load product")}finally{p(!1)}})()},[c]),N)return e.jsxs("div",{className:"min-h-screen bg-secondary",children:[e.jsx(m,{query:"",setQuery:()=>{},onSearch:()=>{},variant:"compact"}),e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary mb-4"}),e.jsx("p",{className:"text-lg text-secondary-gray",children:"Loading product..."})]})})]});if(h||!s)return e.jsxs("div",{className:"min-h-screen bg-secondary",children:[e.jsx(m,{query:"",setQuery:()=>{},onSearch:()=>{},variant:"compact"}),e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(t,{className:"max-w-md mx-4",children:e.jsxs(l,{className:"p-8 text-center",children:[e.jsx(y,{className:"h-16 w-16 text-tertiary-gray mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-semibold mb-2 text-primary-gray",children:"Product Not Found"}),e.jsx("p",{className:"text-secondary-gray mb-6",children:h||"This product could not be found."}),e.jsxs(d,{onClick:()=>x(-1),children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Go Back"]})]})})})]});const i=s.price.promo_price_nzd&&s.price.promo_price_nzd<s.price.price_nzd,b=s.price.promo_price_nzd??s.price.price_nzd;return e.jsxs("div",{className:"min-h-screen bg-secondary",children:[e.jsx(m,{query:"",setQuery:()=>{},onSearch:()=>{},variant:"compact"}),e.jsxs("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs(d,{variant:"ghost",onClick:()=>x(-1),className:"mb-6",children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Back to Results"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx(u.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:e.jsx(t,{className:"glass-card overflow-hidden",children:e.jsx("div",{className:"aspect-square bg-white p-8 flex items-center justify-center",children:s.image_url?e.jsx("img",{src:s.image_url,alt:s.name,className:"w-full h-full object-contain",onError:n=>{var a;n.currentTarget.style.display="none",(a=n.currentTarget.parentElement)==null||a.classList.add("bg-gradient-to-br","from-tertiary","to-secondary")}}):e.jsx(y,{className:"h-32 w-32 text-tertiary-gray/30"})})})}),e.jsxs(u.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},className:"space-y-6",children:[e.jsxs("div",{children:[i&&e.jsx(o,{className:"mb-3 promo-badge",children:"SALE"}),e.jsx("h1",{className:"text-4xl font-bold text-primary-gray mb-2",children:s.name}),s.brand&&e.jsx("p",{className:"text-xl text-secondary-gray",children:s.brand})]}),e.jsx(t,{className:"glass-card",children:e.jsxs(l,{className:"p-6",children:[e.jsxs("div",{className:"flex items-baseline gap-3 mb-4",children:[e.jsxs("span",{className:"text-5xl font-black text-primary",children:["$",b.toFixed(2)]}),i&&e.jsxs("span",{className:"text-xl line-through text-tertiary-gray",children:["$",s.price.price_nzd.toFixed(2)]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[s.price.price_per_100ml&&e.jsxs("p",{className:"text-secondary-gray",children:["$",s.price.price_per_100ml.toFixed(2)," per 100ml"]}),s.price.price_per_standard_drink&&e.jsxs("p",{className:"text-secondary-gray",children:["$",s.price.price_per_standard_drink.toFixed(2)," per standard drink"]})]}),i&&e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[s.price.is_member_only&&e.jsxs(o,{variant:"secondary",className:"gap-1 bg-gold/20 text-gold border-gold/30",children:[e.jsx(v,{className:"h-3 w-3"}),"Members Only"]}),s.price.promo_ends_at&&e.jsxs(o,{variant:"outline",className:"gap-1 text-primary border-primary/30",children:[e.jsx(w,{className:"h-3 w-3"}),new Date(s.price.promo_ends_at).toLocaleDateString("en-NZ")]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-subtle",children:[e.jsxs("div",{className:"flex items-center gap-2 text-secondary-gray mb-4",children:[e.jsx(k,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-primary-gray",children:s.price.store_name}),e.jsx("p",{className:"text-sm",children:s.chain})]})]}),s.product_url&&e.jsx(d,{asChild:!0,className:"w-full bg-primary hover:bg-accent text-white",size:"lg",children:e.jsxs("a",{href:s.product_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2",children:["View at Store",e.jsx(S,{className:"h-4 w-4"})]})})]})]})}),e.jsx(t,{className:"glass-card",children:e.jsxs(l,{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-primary-gray",children:"Product Details"}),e.jsxs("dl",{className:"space-y-3 text-sm",children:[s.category&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-secondary-gray",children:"Category"}),e.jsx("dd",{className:"font-medium text-primary-gray capitalize",children:s.category.replace("_"," ")})]}),s.abv_percent&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-secondary-gray",children:"Alcohol %"}),e.jsxs("dd",{className:"font-medium text-primary-gray",children:[s.abv_percent,"%"]})]}),s.total_volume_ml&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-secondary-gray",children:"Volume"}),e.jsxs("dd",{className:"font-medium text-primary-gray",children:[s.total_volume_ml,"ml"]})]}),s.pack_count&&s.pack_count>1&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-secondary-gray",children:"Pack Size"}),e.jsxs("dd",{className:"font-medium text-primary-gray",children:[s.pack_count," units"]})]}),s.price.standard_drinks&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-secondary-gray",children:"Standard Drinks"}),e.jsx("dd",{className:"font-medium text-primary-gray",children:s.price.standard_drinks})]})]})]})})]})]})]})]})};export{B as ProductDetail,B as default};
